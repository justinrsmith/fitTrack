{% extends 'base.html' %}
{% block head %}
<link href="../static/css/bootstrap-datepicker.css" rel="stylesheet" media="screen">
{% endblock %}
{% block content %}

<div class="row">       

	<div class="col-8">
		<h3>Your Recent Activity</h3>
		<table class="table table-hover" id="recent_activity">
			<th>Category</th>
			<th>Exercise</th>
			<th>Sets</th>
			<th>Reps</th>
			<th>Weight</th>
			{% if recent %}
				{% for r in recent %}
					<tr><td>{{ r.header.category.name }}</td>
					<td>{{ r.header.exercise.name }}</td>
					<td>{{ r.sets }}</td>
					<td>{{ r.reps }}</td>
					<td>{{ r.weight }}</td>
					</td></tr>
				{% endfor %}
			{% endif %}
		</table>
	</div>
	<div class="col-4">
		<h3>User</h3>
		<table class="table table-hover">
		{% if user %}
			{% for u in user %}
		    	<tr>
		        	<th scope="row">First Name</th>
		        	<td>{{ u.firstName }}</td>
		    	</tr>
		    	<tr>
			        <th scope="row">Last Name</th>
			        <td>{{ u.lastName }}</td>
			    </tr>
			        <tr>
			        <th scope="row">Age</th>
			        <td>{{ u.age }}</td>
			    </tr>
			        <tr>
			        <th scope="row">Location</th>
			        <td>{{ u.location }}</td>
			    </tr>
			        <tr>
			        <th scope="row">Email</th>
			        <td>{{ u.email }}</td>
			    </tr>
		    {% endfor %}
		{% endif %}
		</table>
		
	</div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<p>Put something in this box to send it to the server with a post request
<input type="text" id="dp1" name="user-input"> <button>Go</button>
<p>

<script>
	$('#dp1').datepicker({
  		format: 'mm-dd-yyyy'
	});
    $('button').on('click', function(){
        var button = $(this)
        var data = {
            // this is just an object that sets up what key/value pairs
            // to send to the server. Notice it can be totally different
            // than what's in the html markup.
            user_data: $('input').val()
        }

        $.post('/post', data, function(response){
            button.after(response)
        })
        .error(function(r){
            // post requests obscure errors, so it's a good idea
            // to attach an error handling method that logs the
            // failure to the console. You can inpsect error messages
            // in the response's responseText attribute
            console.log(r)
        })
    })
</script>
{% endblock %}